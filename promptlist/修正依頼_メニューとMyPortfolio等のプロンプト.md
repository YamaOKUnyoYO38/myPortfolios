# High-Dividend Hunter 修正依頼プロンプト（メニューバー・My Portfolio・オプション等）

以下を**そのままコピー**して、開発者または AI に渡して実行してください。

---

## コピー用プロンプト（ここから）

```
# 依頼内容
アプリ「High-Dividend Hunter」に以下の修正を加えてください。

# ルール
- 修正は**1つずつ**行う。
- 各修正ごとにエラーや不具合がないことを確認してから、リポジトリに反映（コミット・プッシュ）する。
- 全修正完了後、**Render でデプロイ**し、使用できる状態まで行う。

---

# 修正内容（実装順は依存関係を考慮してよい）

## 修正1: メニューバーの追加
- アプリタイトル「High-Dividend Hunter」の**直下**に、**メニューバー**（各項目が横向きに並ぶ形式）を作成する。
- メニュー項目は次の3つとする。
  - **ランキングを取得**
  - **ポートフォリオを作成**
  - **My Portfolio**
- 各項目をクリックすると、対応する画面・ページに遷移するようにする。

## 修正2: 「リストに保存」の削除と「My Portfolio」単独ページ化
- 取得データの下にある「リストに保存」のブロックを**削除**する。
- メニューバーの「**My Portfolio**」をクリックしたときに表示される**単独ページ**として「My Portfolio」を実装する。
- 「My Portfolio」ページ内の**左上**に、次の2項目からなるメニューバーを設ける。
  1. **新規作成**
     - クリックするとウィンドウ（モーダル／ダイアログ）が表示される。
     - 「ポートフォリオ名」を任意で入力できる入力欄と「作成」ボタンを配置する。
     - 「作成」ボタンをクリックしたら、その名前でポートフォリオが作成される。
  2. **ポートフォリオを参照**
     - すでに作成したポートフォリオの「ポートフォリオ名」を一覧表示する。
     - ポートフォリオ名をクリックすると、**専用の閲覧用ページ**に遷移する。
     - 閲覧用ページでは、選択したポートフォリオ内に保存された**銘柄のリスト**が表示される。

## 修正3: 「ポートフォリオを参照」閲覧ページにソート機能を追加
- 「ポートフォリオを参照」で遷移した**閲覧用ページ**に、**ソート機能**を追加する。
- ソート条件は次のとおり**指定可能**とする。
  - 昇順／降順（汎用）
  - 作成日時
  - 閲覧回数
  - リスト内の銘柄数（昇順・降順）

## 修正4: 「サイト名を選ぶ」をネット検索ベースの候補表示に変更
- 取得方法の「**サイト名を選ぶ**」について、**入力した内容からインターネットの情報を網羅的に検索**し、該当するサイトを候補に表示する仕組みに変更する。
- 情報のヒット範囲を拡大し、ユーザーが選べる候補が増えるようにする。
- （実装例: 検索APIやスクレイピングで候補URL・サイト名を取得し、選択肢として表示する）

## 修正5: 取得対象を「全公開ページ」に拡張
- 取得の際に、**任意のサイトの表面（トップ）の可視部分だけではなく、公開されている全ページを対象に取得**し、表示するように変更する。
- 対象サイトの公開範囲内で、取得可能なページを巡回してデータを集約し、一覧に表示する。

## 修正6: 「Symbol」列を「オプション」に変更し、クリックでポートフォリオ追加
- 取得リストの列「**Symbol**」を「**オプション**」に変更する。
- 「オプション」セルをクリックすると、**ウィンドウ（モーダル等）**が表示される。
- ウィンドウ内に「**ポートフォリオに追加**」項目を設ける。
  - 「ポートフォリオに追加」をクリック → 作成済みのポートフォリオリストの一覧を表示する。
  - 任意のリストをクリックすると、その銘柄をそのポートフォリオに追加する。
  - **リストが1つもない場合**は「リストがありません。」と表示し、**新規作成ボタン**を表示する。
  - 新規作成ボタン（または「新規作成」項目）をクリック → ウィンドウを表示し、「ポートフォリオ名」を任意で入力して「作成」ボタンで作成できるようにする。
- 上記の流れで、オプションから銘柄をポートフォリオに追加できるようにする。

## 修正7: 「オプション」クリックでソート機能を提供
- 「オプション」をクリックしたときに表示されるウィンドウ内で、**ソート**も選択できるようにする。
- ソートの流れ: 「オプション」クリック → 条件を**プルダウン**で表示 → 任意の条件をクリック → 取得リストにソートを適用する。
- ソート条件は次のとおりとする。
  - 順位の昇順／降順
  - あいうえお（名称等）の昇順／降順
  - 一株配当の昇順／降順
  - 取引値の昇順／降順

---

# 補足
- 既存の「ランキング取得」「テーブル表示」「CSVダウンロード」は維持する。
- 技術スタック: Python 3.10+, Streamlit, Requests, BeautifulSoup4, Pandas。変更する場合は理由を明記する。
- 各修正後は必ず動作確認し、問題がなければコミット・プッシュする。
- 全修正完了後、main を Render にデプロイし、本番URLで動作確認して「使用できる状態」で完了とする。
```

---

## コピー用プロンプト（ここまで）

---

## 運用メモ

- **修正の順序**: 修正1（メニューバー）→ 修正2（My Portfolio ページ化）→ 修正6・7（オプション列）→ 修正3（参照ページのソート）の順が扱いやすいです。修正4・5は検索・クロールのため、別途依存（ライブラリやAPI）を確認してから実装してください。
- **1つずつ反映**: 各修正をコミットしてから次に進み、問題があればその時点で修正してから先に進んでください。
- **Render**: 最後に `git push origin main` でプッシュし、Render の自動デプロイで本番が更新されます。手動デプロイの場合は Render ダッシュボードから「Manual Deploy」を実行してください。
